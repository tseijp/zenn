---
title: 'Bulk Redirects with Hono'
emoji: 'ğŸ”¥'
type: 'tech'
topics:
        - 'hono'
        - 'cloudflare'
        - 'workers'
        - 'google'
        - 'typescript'
published: true
published_at: '2026-01-05 17:00'
---

# Bulk Redirects with Hono

ãƒ‰ãƒ¡ã‚¤ãƒ³ç§»è¡Œæ™‚ã« Google Search Console ã® 301 ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆæ¤œè¨¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ãŸã®ã§ã€Cloudflare Bulk Redirects ã®ã‹ã‚ã‚Šã« Cloudflare Workers ä¸Šã« Hono ãƒ™ãƒ¼ã‚¹ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚

https://tsei.jp/articles/2026/01/05/note/

â†‘ english ver

## å•é¡Œ

Google Search Console ã®ã€Œã‚¢ãƒ‰ãƒ¬ã‚¹å¤‰æ›´ã€ç”»é¢ã§ã€Œãƒšãƒ¼ã‚¸ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã—ã¾ã„ã€é•·ã‚‰ããƒ‰ãƒ¡ã‚¤ãƒ³ç§»è¡ŒãŒå®Œäº†ã§ããªã„çŠ¶æ³ã§ã—ãŸã€‚

![ç¢ºèªã‚¨ãƒ©ãƒ¼:1 ä»¶ä»¥ä¸Šã®å¿…é ˆã®ãƒ†ã‚¹ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¶šè¡Œã§ãã¾ã›ã‚“ã€‚âŒ ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã‹ã‚‰ã® 301 ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã€‚ãƒšãƒ¼ã‚¸ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚âœ… ä¸¡æ–¹ã®ã‚µã‚¤ãƒˆã®ç¢ºèªã€‚æ‰€æœ‰æ¨©ã‚’è¨¼æ˜ã—ã¾ã—ãŸã€‚âš ï¸ ã‚µãƒ³ãƒ—ãƒ«ãƒšãƒ¼ã‚¸ã‹ã‚‰ã® 301 ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã€‚ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ](https://r.tsei.jp/note/2026-01-05/0.jpg)

## è§£æ±ºç­–

Cloudflare Workers ä¸Šã« 301 ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹ Hono ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ã€ Google Search Console ãŒãƒ‰ãƒ¡ã‚¤ãƒ³ç§»è¡Œã‚’æ¤œè¨¼ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

```rb
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ > % npm create hono                                        â”‚
â”‚                                                            â”‚
â”‚   > npx                                                    â”‚
â”‚   > create-hono                                            â”‚
â”‚                                                            â”‚
â”‚   create-hono version 0.19.4                               â”‚
â”‚   âœ” Target directory redirector                            â”‚
â”‚   âœ” Which template do you want to use? cloudflare-workers  â”‚
â”‚   âœ” Do you want to install project dependencies? No        â”‚
â”‚   âœ” Cloning the template                                   â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ cloudflare-workers ã‚’é¸æŠã—ã¾ã™ã€‚

## è¨­å®š

src/index.ts ã‚’ç·¨é›†ã—ã¦ç§»è¡Œå…ˆãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®šã—ã¾ã™ã€‚

```ts
import { Hono } from 'hono'

const DOMAIN = 'https://glre.dev'

const app = new Hono()

app.all('*', (c) => {
        const { pathname, search } = new URL(c.req.url)
        return c.redirect(`${DOMAIN}${pathname}${search}`, 301)
})

export default app
```

## Cloudflare ãƒ‡ãƒ—ãƒ­ã‚¤

### 1. Wrangler ãƒ­ã‚°ã‚¤ãƒ³

```bash
npx wrangler login
```

### 2. ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

```bash
npm run deploy
```

ã‚ã¨ã¯ã€Cloudflare Workers ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ã½ã¡ã½ã¡ã—ã¦ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®šã—ã¾ã™ã€‚

## æ¤œè¨¼

ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ï¼š

```bash
curl -I https://glre.tsei.jp/
# HTTP/2 301
```

ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€Google Search Console â†’ è¨­å®š â†’ ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å¤‰æ›´ã§æ–°ã—ã„ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’é¸æŠã™ã‚‹ã ã‘ã§ç§»è¡ŒãŒå®Œäº†ã—ã¾ã—ãŸ ğŸ‰

![ã“ã®ã‚µã‚¤ãƒˆã¯ç¾åœ¨ç§»è¡Œä¸­ã§ã™ã€‚ã“ã®ã‚µã‚¤ãƒˆã€‚æ–°ã—ã„ã‚µã‚¤ãƒˆã€‚é–‹å§‹æ—¥](https://r.tsei.jp/note/2026-01-05/1.jpg)
